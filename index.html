<!-- interface.html -->
<!DOCTYPE html>
<html>
<body>
    <!-- Load Puter JS -->
    <script src="https://js.puter.com/v2/"></script>
    <div id="status">Ready</div>

    <script>
        // Python will call this function directly
        window.askPuter = async (prompt) => {
            try {
                document.getElementById('status').innerText = "Working...";
                
                // Call Puter AI (uses browser session)
                const response = await puter.ai.chat(prompt, {
                    model: 'gemini-2.0-flash'
                });

                // Extract text safely
                let cleanText = "";
                if (response && response.message && response.message.content) {
                    cleanText = response.message.content;
                } else {
                    cleanText = JSON.stringify(response);
                }

                document.getElementById('status').innerText = "Done";
                return cleanText;

            } catch (err) {
                return "Error: " + err.message;
            }
        };
    </script>
</body>
</html>